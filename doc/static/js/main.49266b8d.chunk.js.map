{"version":3,"sources":["components/molecules/FaceEditor.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["FaceEditor","props","state","image","scale","died","handleDiedCheck","bind","handleNewImage","handleDeleteImage","handleScale","this","setState","e","target","files","parseFloat","value","className","width","height","border","type","checked","onChange","accept","onClick","step","min","max","React","Component","COPYRIGHT","App","canvasPreview","ctxPreview","canvasFace","ctxFace","canvasTitle","ctxTitle","startTime","prevFadeRatio","frameStartTime","gifjs","dlImage","document","createElement","length","title","previewing","canDL","downloadUrl","fileName","recording","showCopyright","handleMemberLengthChange","handleChangeTitle","handleClickPreview","handleChangeCopyright","animate","querySelector","getContext","Array","from","_","k","map","key","toString","parseInt","drawFaceList","drawTitle","GIF","workerScript","quality","workers","Date","getTime","requestAnimationFrame","now","delay","addFrame","copy","me","on","blob","url","URL","createObjectURL","src","render","elapsed","MSEC_BEFORE","saveGif","fadeRatio","MSEC_WHOLE","x","calculateFadeRatio","drawFrame","fillStyle","fillRect","globalAlpha","drawImage","ratio","w","h","y","faces","querySelectorAll","c","filter","ctx","checks","index","canvas","undefined","_y","CANVAS_HEIGHT","create","i","ret","unshift","getFaceCanvases","pos","calculatePosition","p","img","getImageData","data","v","grayscale","putImageData","drawCopyright","font","textAlign","lineWidth","strokeStyle","strokeText","CANVAS_WIDTH","fillText","fontSize","Math","floor","getFont","measureText","getTitle","getTextSize","htmlFor","id","String","placeholder","faceListClass","faceList","disabled","style","display","href","download","Boolean","window","location","hostname","match","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.49266b8d.chunk.js","sourcesContent":["import React from 'react';\nimport './FaceEditor.css';\nimport AvatarEditor from 'react-avatar-editor';\n\ntype FaceEditorProps = {\n  image?: string | File;\n  width: number;\n  height: number;\n};\n\ntype FaceEditorState = {\n  image: string | File;\n  scale: number;\n  died: boolean;\n};\n\nclass FaceEditor extends React.Component<FaceEditorProps, FaceEditorState> {\n  constructor(props: FaceEditorProps) {\n    super(props);\n    this.state = {\n      image: this.props.image || '',\n      scale: 1,\n      died: false,\n    };\n    this.handleDiedCheck = this.handleDiedCheck.bind(this);\n    this.handleNewImage = this.handleNewImage.bind(this);\n    this.handleDeleteImage = this.handleDeleteImage.bind(this);\n    this.handleScale = this.handleScale.bind(this);\n  }\n\n  handleDiedCheck(): void {\n    this.setState((state) => ({\n      died: !state.died,\n    }));\n  }\n\n  handleNewImage(e: React.ChangeEvent<HTMLInputElement>): void {\n    if (!e.target) return;\n    const input = e.target as HTMLInputElement;\n    const files = input.files;\n    if (!files) return;\n    this.setState({ image: files[0] });\n  }\n\n  handleDeleteImage(): void {\n    this.setState({ image: '' });\n  }\n\n  handleScale(e: React.ChangeEvent<HTMLInputElement>): void {\n    const scale = parseFloat(e.target.value);\n    this.setState({ scale });\n  }\n\n  render() {\n    return (\n      <div className=\"FaceEditor\">\n        <AvatarEditor\n          className={\n            'FaceEditor-Canvas' + (this.state.died ? ' FaceEditor-Died' : '')\n          }\n          image={this.state.image}\n          scale={this.state.scale}\n          width={this.props.width}\n          height={this.props.height}\n          border={0}\n        />\n        <div className=\"FaceEditor-Controls FaceEditor-Controls-Top\">\n          <label>\n            <input\n              className=\"FaceEditor-Controls-Died\"\n              type=\"checkbox\"\n              checked={this.state.died}\n              onChange={this.handleDiedCheck}\n            />\n            死\n          </label>\n          <label>\n            画像\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={this.handleNewImage}\n            />\n          </label>\n          <label\n            className=\"FaceEditor-Controls-Delete\"\n            onClick={this.handleDeleteImage}\n          >\n            ×\n          </label>\n        </div>\n        <div className=\"FaceEditor-Controls FaceEditor-Controls-Bottom\">\n          <input\n            type=\"range\"\n            className=\"FaceEditor-Controls-Scale\"\n            step=\"0.01\"\n            min=\"1\"\n            max=\"2\"\n            value={this.state.scale}\n            onChange={this.handleScale}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default FaceEditor;\n","import React from 'react';\nimport './App.css';\nimport FaceEditor from './components/molecules/FaceEditor';\n\ntype AppProps = {};\n\ntype AppState = {\n  length: number;\n  title: string;\n  previewing: boolean;\n  canDL: boolean;\n  downloadUrl: string;\n  fileName: string;\n  recording: boolean;\n  showCopyright: boolean;\n};\n\nconst CANVAS_WIDTH = 480;\nconst CANVAS_HEIGHT = 360;\n\nconst FACE_WIDTH = 150;\nconst FACE_HEIGHT = 270;\n\nconst DEFAULT_TITLE = 'エフエフジューヨン殺人事件';\n\nconst MAX_SCALE = 8;\n\nconst MSEC_BEFORE = 500;\nconst MSEC_FACE = 2200;\nconst MSEC_FADE = 800;\nconst MSEC_STOP = 3000;\nconst MSEC_AFTER = 500;\nconst MSEC_WHOLE = MSEC_BEFORE + MSEC_FACE + MSEC_FADE + MSEC_STOP + MSEC_AFTER;\n\nconst COPYRIGHT = 'Copyright (C) SQUARE ENIX CO., LTD. All Rights Reserved.';\n\ntype Face = {\n  canvas?: HTMLCanvasElement;\n  died: boolean;\n};\n\ntype Position = {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n};\n\nfunction grayscale(data: Uint8ClampedArray) {\n  for (let i = 0; i < data.length; i += 4) {\n    const v = 0.299 * data[i] + 0.587 * data[i + 1] + 0.114 * data[i + 2];\n    // const v = (data[i] + data[i + 1] + data[i + 2]) / 3;\n    data[i] = v; // red\n    data[i + 1] = v; // green\n    data[i + 2] = v; // blue\n  }\n}\n\nfunction easeInCubic(x: number): number {\n  return x * x * x;\n}\n\nfunction calculateFadeRatio(elapsed: number): number {\n  if (elapsed <= MSEC_BEFORE || elapsed > MSEC_WHOLE - MSEC_AFTER) {\n    return -100;\n  } else if (elapsed <= MSEC_BEFORE + MSEC_FACE) {\n    return 0;\n  } else if (elapsed > MSEC_BEFORE + MSEC_FACE + MSEC_FADE) {\n    return 101;\n  } else {\n    const ratio = (elapsed - MSEC_FACE) / MSEC_FADE;\n    return easeInCubic(ratio) * 100;\n  }\n}\n\nclass App extends React.Component<AppProps, AppState> {\n  constructor(props: AppProps) {\n    super(props);\n    this.state = {\n      length: 8,\n      title: '',\n      previewing: false,\n      canDL: false,\n      downloadUrl: '',\n      fileName: '',\n      recording: false,\n      showCopyright: true,\n    };\n    this.handleMemberLengthChange = this.handleMemberLengthChange.bind(this);\n    this.handleChangeTitle = this.handleChangeTitle.bind(this);\n    this.handleClickPreview = this.handleClickPreview.bind(this);\n    this.handleChangeCopyright = this.handleChangeCopyright.bind(this);\n    this.animate = this.animate.bind(this);\n  }\n\n  private canvasPreview: HTMLCanvasElement | null = null;\n  private ctxPreview: CanvasRenderingContext2D | null = null;\n  private canvasFace: HTMLCanvasElement | null = null;\n  private ctxFace: CanvasRenderingContext2D | null = null;\n  private canvasTitle: HTMLCanvasElement | null = null;\n  private ctxTitle: CanvasRenderingContext2D | null = null;\n\n  private startTime = -1;\n  private prevFadeRatio = -1;\n  private frameStartTime = -1;\n\n  private gifjs: GIF | null = null;\n  private dlImage = document.createElement('img');\n\n  componentDidMount() {\n    this.canvasPreview = document.querySelector(\n      '#Preview-Canvas'\n    ) as HTMLCanvasElement;\n    if (this.canvasPreview)\n      this.ctxPreview = this.canvasPreview.getContext('2d');\n    this.canvasFace = document.querySelector(\n      '#Preview-Canvas-Cache-Face'\n    ) as HTMLCanvasElement;\n    if (this.canvasFace) this.ctxFace = this.canvasFace.getContext('2d');\n    this.canvasTitle = document.querySelector(\n      '#Preview-Canvas-Cache-Title'\n    ) as HTMLCanvasElement;\n    if (this.canvasTitle) this.ctxTitle = this.canvasTitle.getContext('2d');\n  }\n\n  faceListClass(): string {\n    if (this.state.length <= 4) {\n      return 'FaceList-Max4';\n    }\n    if (this.state.length <= 6) {\n      return 'FaceList-Max3';\n    }\n    if (this.state.length <= 8) {\n      return 'FaceList-Max4';\n    }\n    return 'FaceList-Max5';\n  }\n\n  faceList(): JSX.Element[] {\n    return Array.from({ length: this.state.length }, (_, k) => k).map((key) => (\n      <FaceEditor\n        width={FACE_WIDTH}\n        height={FACE_HEIGHT}\n        key={key.toString()}\n      />\n    ));\n  }\n\n  handleChangeCopyright() {\n    this.setState((state) => ({\n      showCopyright: !state.showCopyright,\n    }));\n  }\n\n  handleMemberLengthChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const length = parseInt(e.target.value);\n    this.setState({ length });\n  }\n\n  handleChangeTitle(e: React.ChangeEvent<HTMLInputElement>) {\n    const title = e.target.value || '';\n    this.setState({ title });\n  }\n\n  handleClickPreview() {\n    if (!this.canvasPreview || !this.canvasFace || !this.canvasTitle) return;\n    // キャッシュ描画\n    this.drawFaceList();\n    this.drawTitle();\n    // 録画開始\n    this.gifjs = new GIF({\n      workerScript: 'js/gif.worker.js',\n      quality: 10,\n      workers: 2,\n      width: CANVAS_WIDTH,\n      height: CANVAS_HEIGHT,\n    });\n    // 描画開始\n    this.startTime = new Date().getTime();\n    this.frameStartTime = -1;\n    this.prevFadeRatio = -1;\n    requestAnimationFrame(this.animate);\n    // ステート更新\n    this.setState({\n      previewing: true,\n      downloadUrl: '',\n      fileName: '',\n      canDL: false,\n      recording: true,\n    });\n  }\n\n  addFrame(now: number): void {\n    if (!this.ctxPreview || !this.gifjs) return;\n    if (this.frameStartTime <= 0) {\n      this.frameStartTime = now;\n      return;\n    }\n    const delay = now - this.frameStartTime;\n    this.gifjs.addFrame(this.ctxPreview, { copy: true, delay });\n    this.frameStartTime = now;\n  }\n\n  saveGif(): void {\n    if (!this.gifjs) return;\n    const me = this;\n    this.gifjs.on('finished', function (blob: Blob) {\n      const url = URL.createObjectURL(blob);\n      me.dlImage.src = url;\n      me.setState({\n        downloadUrl: url,\n        fileName: (me.state.title || 'titlecall') + '.gif',\n        canDL: true,\n        recording: false,\n      });\n    });\n    this.gifjs.render();\n  }\n\n  animate(): void {\n    if (this.startTime < 0) return;\n    const now = new Date().getTime();\n    const elapsed = now - this.startTime;\n    // アニメーション終了\n    if (elapsed > MSEC_WHOLE) {\n      // フレーム追加\n      this.addFrame(now);\n      // 保存\n      this.saveGif();\n      return;\n    }\n    // アニメーション\n    const fadeRatio = calculateFadeRatio(elapsed);\n    //console.log(fadeRatio);\n    // フレームに変更があった場合、実際に描画\n    if (this.prevFadeRatio !== fadeRatio) {\n      // 前回フレームをGIFに追加\n      this.addFrame(now);\n      // 描画\n      this.drawFrame(fadeRatio);\n      // キャッシュの値を更新\n      this.prevFadeRatio = fadeRatio;\n    }\n    requestAnimationFrame(this.animate);\n  }\n\n  drawFrame(fadeRatio: number): void {\n    if (\n      !this.ctxPreview ||\n      !this.ctxFace ||\n      !this.ctxTitle ||\n      !this.canvasPreview ||\n      !this.canvasFace ||\n      !this.canvasTitle\n    )\n      return;\n    // black\n    if (fadeRatio < 0) {\n      this.ctxPreview.fillStyle = 'rgb(0, 0, 0)';\n      this.ctxPreview.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n      return;\n    }\n    // face\n    this.ctxPreview.globalAlpha = 1;\n    this.ctxPreview.drawImage(this.canvasFace, 0, 0);\n    if (fadeRatio < 1) return;\n    // title\n    if (fadeRatio > 100) {\n      this.ctxPreview.drawImage(this.canvasTitle, 0, 0);\n      return;\n    }\n    // scaled title\n    const ratio = fadeRatio * 0.01;\n    this.ctxPreview.globalAlpha = ratio + 0.1;\n    const scale = MAX_SCALE - ratio * (MAX_SCALE - 1);\n    const w = CANVAS_WIDTH * scale;\n    const h = CANVAS_HEIGHT * scale;\n    const x = ((w - CANVAS_WIDTH) / 2) * -1;\n    const y = ((h - CANVAS_HEIGHT) / 2) * -1;\n    this.ctxPreview.drawImage(\n      this.canvasTitle,\n      0,\n      0,\n      CANVAS_WIDTH,\n      CANVAS_HEIGHT,\n      x,\n      y,\n      w,\n      h\n    );\n  }\n\n  getFaceCanvases(): Face[] {\n    const faces = document.querySelectorAll('.FaceEditor-Canvas');\n    if (faces.length !== this.state.length) return [];\n    const face_ctx = Array.from(faces)\n      .map((c) => {\n        if (!c) return null;\n        return (c as HTMLCanvasElement).getContext('2d');\n      })\n      .filter((ctx) => !!ctx);\n    if (face_ctx.length !== this.state.length) return [];\n    const checks = document.querySelectorAll('.FaceEditor-Controls-Died');\n    if (checks.length !== this.state.length) return [];\n    return Array.from(checks).map((c, index) => ({\n      canvas: (faces[index] as HTMLCanvasElement) || undefined,\n      died: (c as HTMLInputElement).checked || false,\n    }));\n  }\n\n  getTitle(): string {\n    return '「' + (this.state.title || DEFAULT_TITLE) + '」';\n  }\n\n  calculatePosition(faces: Face[]): Position[] {\n    let h: number;\n    let w: number;\n    let _y = 0;\n    if (faces.length < 5) {\n      // 1段組 ... width基準\n      w = CANVAS_WIDTH / (faces.length + 1);\n      h = (FACE_HEIGHT * w) / FACE_WIDTH;\n      _y = (CANVAS_HEIGHT - h) / 2;\n    } else {\n      // 2段組 ... height基準\n      h = CANVAS_HEIGHT / 2;\n      w = (FACE_WIDTH * h) / FACE_HEIGHT;\n    }\n    const create = (x: number, y: number): Position[] =>\n      Array.from({ length: x }).map((_, i) => ({\n        x: (CANVAS_WIDTH - w * x) / 2 + (w + 1) * i,\n        y: y + _y,\n        w,\n        h,\n      }));\n    const ret: Position[] = [];\n    switch (faces.length) {\n      case 8:\n        ret.unshift(...create(4, h + 1));\n        ret.unshift(...create(4, 0));\n        break;\n      case 7:\n        ret.unshift(...create(3, h + 1));\n        ret.unshift(...create(4, 0));\n        break;\n      case 6:\n        ret.unshift(...create(3, h + 1));\n        ret.unshift(...create(3, 0));\n        break;\n      case 5:\n        ret.unshift(...create(2, h + 1));\n        ret.unshift(...create(3, 0));\n        break;\n      case 4:\n        ret.unshift(...create(4, 0));\n        break;\n      case 3:\n        ret.unshift(...create(3, 0));\n        break;\n      case 2:\n        ret.unshift(...create(2, 0));\n        break;\n    }\n    return ret;\n  }\n\n  drawFaceList(): void {\n    if (!this.ctxFace) return;\n    // get faces\n    const faces = this.getFaceCanvases();\n    if (faces.length !== this.state.length) return;\n    // calculate positions\n    const pos = this.calculatePosition(faces);\n    if (pos.length !== this.state.length) return;\n    // clear back\n    this.ctxFace.fillStyle = 'rgb(0, 0, 0)';\n    this.ctxFace.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    // draw grayscale\n    for (let i = 0; i < faces.length; i++) {\n      if (!faces[i].died) continue;\n      const c = faces[i].canvas;\n      if (!c) continue;\n      const p = pos[i];\n      this.ctxFace.drawImage(\n        c,\n        0,\n        0,\n        FACE_WIDTH,\n        FACE_HEIGHT,\n        p.x,\n        p.y,\n        p.w,\n        p.h\n      );\n    }\n    // grayscale filter\n    const img = this.ctxFace.getImageData(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    grayscale(img.data);\n    this.ctxFace.putImageData(img, 0, 0);\n    // black filter\n    this.ctxFace.globalAlpha = 0.5;\n    this.ctxFace.fillStyle = 'rgb(0, 0, 0)';\n    this.ctxFace.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    this.ctxFace.globalAlpha = 1;\n    // draw color\n    for (let i = 0; i < faces.length; i++) {\n      if (faces[i].died) continue;\n      const c = faces[i].canvas;\n      if (!c) continue;\n      const p = pos[i];\n      this.ctxFace.drawImage(\n        c,\n        0,\n        0,\n        FACE_WIDTH,\n        FACE_HEIGHT,\n        p.x,\n        p.y,\n        p.w,\n        p.h\n      );\n    }\n    // copyright\n    if (this.state.showCopyright) this.drawCopyright();\n  }\n\n  drawCopyright(): void {\n    if (!this.ctxFace) return;\n    this.ctxFace.font =\n      \"12px 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif\";\n    this.ctxFace.textAlign = 'center';\n    this.ctxFace.lineWidth = 5;\n    this.ctxFace.strokeStyle = '#FFFFFF';\n    this.ctxFace.globalAlpha = 0.5;\n    this.ctxFace.strokeText(COPYRIGHT, CANVAS_WIDTH / 2, CANVAS_HEIGHT - 4);\n    this.ctxFace.lineWidth = 3;\n    this.ctxFace.strokeStyle = '#000000';\n    this.ctxFace.globalAlpha = 0.8;\n    this.ctxFace.strokeText(COPYRIGHT, CANVAS_WIDTH / 2, CANVAS_HEIGHT - 4);\n    this.ctxFace.fillStyle = '#FFFFFF';\n    this.ctxFace.globalAlpha = 1;\n    this.ctxFace.fillText(COPYRIGHT, CANVAS_WIDTH / 2, CANVAS_HEIGHT - 4);\n  }\n\n  getFont(fontSize: number): string {\n    return (\n      'bold ' +\n      fontSize +\n      \"px 'Times New Roman', 'YuMincho', 'Hiragino Mincho ProN', 'Yu Mincho', 'MS PMincho', serif\"\n    );\n  }\n\n  getTextSize(ctx: CanvasRenderingContext2D, title: string): number {\n    let fontSize = Math.floor(CANVAS_WIDTH / (title.length - 2));\n    while (true) {\n      ctx.font = this.getFont(fontSize);\n      const w = ctx.measureText(title).width;\n      if (w < CANVAS_WIDTH) break;\n      fontSize--;\n    }\n    return fontSize;\n  }\n\n  drawTitle(): void {\n    if (!this.ctxTitle) return;\n    const title = this.getTitle();\n    const fontSize = this.getTextSize(this.ctxTitle, title);\n    this.ctxTitle.fillStyle = 'rgb(0, 0, 0)';\n    this.ctxTitle.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n    this.ctxTitle.fillStyle = 'rgb(255, 255, 255)';\n    this.ctxTitle.font = this.getFont(fontSize);\n    this.ctxTitle.textAlign = 'center';\n    this.ctxTitle.fillText(title, CANVAS_WIDTH / 2, CANVAS_HEIGHT / 2);\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div className=\"GeneralControls\">\n          <table className=\"GeneralControls-ControlTable\">\n            <tbody>\n              <tr>\n                <th>\n                  <label htmlFor=\"num_of_suspects\">人数</label>\n                </th>\n                <td>\n                  <input\n                    type=\"number\"\n                    id=\"num_of_suspects\"\n                    min=\"2\"\n                    max=\"8\"\n                    value={String(this.state.length)}\n                    onChange={this.handleMemberLengthChange}\n                  />\n                  <span>（2～8人）</span>\n                </td>\n              </tr>\n              <tr>\n                <th>\n                  <label htmlFor=\"text_title\">タイトル</label>\n                </th>\n                <td>\n                  <input\n                    type=\"text\"\n                    id=\"text_title\"\n                    placeholder=\"エフエフジューヨン殺人事件\"\n                    value={this.state.title}\n                    onChange={this.handleChangeTitle}\n                  />\n                </td>\n              </tr>\n              {/* <tr>\n                <th>\n                  <label htmlFor=\"num_of_file\">ファイル</label>\n                </th>\n                <td>\n                  <input type=\"number\" id=\"num_of_file\" min=\"1\" max=\"99\" />\n                </td>\n              </tr> */}\n              <tr>\n                <td></td>\n                <td>\n                  <label id=\"GeneralControls-Copyright\">\n                    <input\n                      type=\"checkbox\"\n                      checked={this.state.showCopyright}\n                      onChange={this.handleChangeCopyright}\n                    />\n                    FFXIV権利表記を挿入する\n                  </label>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n        <div className={'FaceList ' + this.faceListClass()}>\n          {this.faceList()}\n        </div>\n        <div className=\"Preview-Area\">\n          <button\n            className=\"Preview-Button\"\n            onClick={this.handleClickPreview}\n            disabled={this.state.recording}\n          >\n            生成\n          </button>\n          <canvas\n            id=\"Preview-Canvas\"\n            style={{ display: this.state.previewing ? 'block' : 'none' }}\n            width={CANVAS_WIDTH}\n            height={CANVAS_HEIGHT}\n          ></canvas>\n          <canvas\n            id=\"Preview-Canvas-Cache-Face\"\n            width={CANVAS_WIDTH}\n            height={CANVAS_HEIGHT}\n          ></canvas>\n          <canvas\n            id=\"Preview-Canvas-Cache-Title\"\n            width={CANVAS_WIDTH}\n            height={CANVAS_HEIGHT}\n          ></canvas>\n          <a\n            id=\"Preview-Canvas-Download-Link\"\n            style={{ display: this.state.canDL ? 'inline' : 'none' }}\n            href={this.state.downloadUrl}\n            download={this.state.fileName}\n          >\n            GIFをダウンロード\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}